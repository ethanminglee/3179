{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "width": 600,
    "height": 600,
    "config": {
        "font": "Roboto",
        "style": {"cell": {"stroke": "transparent"}},
        "legend": {"orient": "bottom"}
    },
    "projection": {
        "type": "mercator",
        "pointRadius": 1
    },
    "layer": [
        {
            "data": {
                "url": "../data/MB_2016_VIC.json",
                "format": {"type": "topojson", "feature": "MB_2016_VIC"},
                "name": "building_outlines"
            },
            "mark": {"type": "geoshape", "fill": "lightgrey", "stroke": "white"}
        },
        {
            "data": {
                "url": "../data/on-street-parking-bay-sensors-crop.csv"
            },
            "mark": {
                "type": "point", 
                "size": 8, 
                "tooltip": {"content": "data"},
                "filled": true
            },
            "encoding": {
                "longitude": {"field": "Longitude", "type": "quantitative"},
                "latitude": {"field": "Latitude", "type": "quantitative"},
                "color": {"field": "Area of Interest", "type": "nominal"}
            },
            "transform": [
                {"filter": {"param": "aoi_select"}}
            ]
        },
        {
            "data": {
                "url": "../data/clue-offstreet-car-parking-2017.csv"
            },
            "mark": {
                "type": "point", 
                "size": 8, 
                "tooltip": {"content": "data"}, 
                "filled": true
            },
            "encoding": {
                "longitude": {"field": "Longitude", "type": "quantitative"},
                "latitude": {"field": "Latitude", "type": "quantitative"},
                "color": {"field": "Area of Interest", "type": "nominal"}
            },
            "transform": [
                {"filter": {"param": "aoi_select"}}
            ]
        },
        {
            "params": [
              {
                "name": "click",
                "value": null,
                "select": {
                  "type": "point",
                  "fields": ["Entity"],
                  "on": "click"
                }
              },
              {
                "name": "aoi_select",
                "value": null,
                "bind": {
                  "input": "select",
                  "options": [
                    null,
                    "Off Street Parking",
                    "On Street Parking"
                  ],
                  "labels": [
                    "Show all",
                    "Off Street Parking",
                    "On Street Parking"
                  ],
                  "name": "Select area of interest: "
                },
                "select": {"type": "point", "fields": ["Area of Interest"]}
              }
            ],
            "mark": {"type": "text", "align": "left","fontWeight": "bold", "cursor": "pointer"},
            "encoding": {"text": {"field":"Area of Interest", "type": "nominal"}}
        }
    ]
}